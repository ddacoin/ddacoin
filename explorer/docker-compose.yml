# DDACOIN blockchain explorer (PHP). Connects to node RPC.
# Copy .env.example to .env and set RPC_* to match the node (see ddacoin/.env).
# Use RPC_HOST=ddacoin-node when node runs in ddacoin/ and shares network ddacoin-net.
#
# Node mode (miner vs node-only) is set in ddacoin/, not here. From ddacoin/:
#   Miner:    docker compose up -d
#   Node-only: docker compose -f docker-compose.yml -f docker-compose.node.yml up -d
#
# Then start explorer: from explorer/ run docker compose up -d
# â†’ http://localhost:${EXPLORER_PORT:-9080}

services:
  explorer:
    image: php:8.2-apache
    container_name: ddacoin-explorer
    ports:
      - "${EXPLORER_PORT:-9080}:80"
    volumes:
      - .:/var/www/html
    environment:
      - RPC_URL=${RPC_URL}
      - RPC_HOST=${RPC_HOST:-ddacoin-node}
      - RPC_PORT=${RPC_PORT:-9667}
      - RPC_USER=${RPC_USER}
      - RPC_PASS=${RPC_PASS}
    networks:
      - ddacoin-net
    restart: unless-stopped

networks:
  ddacoin-net:
    external: true
