# DDACOIN blockchain explorer (PHP). Connects to node RPC.
# Copy .env.example to .env and set RPC_* to match the node (see ddacoin/.env).
# Defaults are network-aware:
# - mainnet: RPC_HOST=ddacoin-node on ddacoin-net
# - testnet: RPC_HOST=ddacoin-testnet-node on ddacoin-testnet-net
#
# Node mode (miner vs node-only) is set in ddacoin/, not here. From ddacoin/:
#   Miner:    docker compose up -d
#   Node-only: docker compose -f docker-compose.yml -f docker-compose.node.yml up -d
#
# Then start explorer: from explorer/ run docker compose up -d
# â†’ http://localhost:${EXPLORER_PORT:-9080}

services:
  explorer:
    image: php:8.2-apache
    container_name: ${EXPLORER_CONTAINER_NAME:-ddacoin-explorer}
    ports:
      - "${EXPLORER_PORT:-9080}:80"
    volumes:
      - .:/var/www/html
    environment:
      - DDACOIN_NETWORK=${DDACOIN_NETWORK:-mainnet}
      - RPC_URL=${RPC_URL}
      - RPC_HOST=${RPC_HOST:-}
      - RPC_PORT=${RPC_PORT:-}
      - RPC_USER=${RPC_USER}
      - RPC_PASS=${RPC_PASS}
    networks:
      - default
      - node
    restart: unless-stopped

networks:
  default: {}
  node:
    external: true
    name: ${NODE_DOCKER_NETWORK:-ddacoin-net}
