# DDACOIN node: time-based consensus, 1 hour per block.
# P2P port 9666, fallback peer ddacoin.kos.engineer.
# Copy .env.example to .env and set RPC_USER, RPC_PASS, MINING_ADDR.
# Run: docker compose up -d
# Optimized for low CPU (e.g. Raspberry Pi): fewer peers, smaller UTXO cache, gentler miner polling.
# Network ddacoin-net allows explorer (in explorer/) to reach node as ddacoin-node:9667.

services:
  ddacoin:
    build: .
    image: ddacoin:latest
    container_name: ddacoin-node
    ports:
      - "9666:9666"   # P2P
      - "9667:9667"   # RPC
    volumes:
      - ddacoin-data:/data
    networks:
      - ddacoin-net
    command:
      - "-b"
      - "/data"
      - "--rpcuser=${RPC_USER}"
      - "--rpcpass=${RPC_PASS}"
      - "--rpclisten=0.0.0.0:9667"
      - "--rpcmaxclients=20"
      - "--txindex"
      - "--addrindex"
      - "--generate"
      - "--miningaddr=${MINING_ADDR}"
    restart: unless-stopped

networks:
  ddacoin-net:
    name: ddacoin-net

volumes:
  ddacoin-data: {}